# 시스템콜과 modebit

## 운영체제란

-   컴퓨터 하드웨어 바로 위에 설치되어 사용자 및 다른 모든 소프트웨어와 하드웨어를 연결하는 소프트웨어 계층
-   컴퓨터 시스템을 편리하게 사용할 수 있는 환경을 제공하고 자원을 효율적으로 관리한다

</br>

## Interrupt | 하드웨어 인터럽트

-   일반적인 인터럽트는 하드웨어 인터럽트를 이야기함 (소프트웨어 인터럽트는 아래 system call과 mode bit)
-   CPU에는 Interrupt line이 달려있음
    프로그램 A를 실행했을 때 Disk에 뭔가 필요하다고 하면 CPU가 직접 가져오는 것이 아니라, OS가 디스크 컨트롤러에게 어떤 파일을 읽어달라는 요청을 함.

-   컨트롤러에게 일을 던져놓고 메모리에서는 CPU를 다른 프로그램에 넘김 디스크 컨트롤러가 일을 다 했다면 CPU에 알려주는 방법이 바로 *Interrupt*를 거는 것

-   CPU는 Interrupt line을 확인하고 처리해야할 일이 있다면 자동적으로 OS에 CPU를 넘김 OS는 다시 필요한 프로그램에 CPU를 넘김

</br>

## System Call | Trap | 소프트웨어 인터럽트

-   사용자 프로그램이 운영체제의 서비스를 받기 위해 커널 함수를 호출하는 것

-   모든 I/O는 특권 명령이기 때문에 사용자 프로그램은 권한이 없음. 따라서, OS에 요청을 해야함. 그것이 바로 시스템콜
    OS로 CPU를 넘기기 위해서 사용자 프로그램이 스스로 메모리에 인터럽트를 거는 것이 바로 시스템콜(사용자 프로그램이 직접 Program Counter를 넘길 수 없기 때문에 interrupt를 발생시켜 주도권을 넘김)
    ![Image](https://user-images.githubusercontent.com/103018534/212537603-bd3dc984-f159-4cd3-89e6-1d5ff46ba428.png)

</br>

## Mode Bit | Trap | 소프트웨어 인터럽트

-   mode bit: CPU에서 기계어를 실행할 때, OS가 실행하는 것인지, 사용자 프로그램이 실행하는 것인지 구분하는 역할

-   사용자 모드\_사용자 프로그램 1 / 모니터 모드\_OS 코드 0

-   사용자 프로그램에 CPU를 넘길 때, mode bit을 1로 변경 후 넘김 => 사용자 모드에서 권한이 없는 기계어를 실행하고자 할 때(Exception) CPU는 자동으로 OS에게 넘어감
