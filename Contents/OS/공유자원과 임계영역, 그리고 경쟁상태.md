# 공유자원과 임계영역, 그리고 경쟁상태(race condition)

## 공유자원

- 시스템 안에서 각 프로세스, 스레드가 함께 접근할 수 있는 모니터, 프린터, 메모리, 파일, 데이터 등의 자원이나 변수 등을 의미

### 경쟁상태(Race Condition)

![Untitled](https://user-images.githubusercontent.com/47595515/212966846-ec5c2721-f809-4b50-9feb-e6bfe6e8ba45.png)

- 공유자원을 2개 이상의 프로세스가 동시에 읽거나 쓰는 상황을 경쟁상태라고 한다
- 동시에 접근을 시도할 때 접근의 타이밍이나 순서 등이 결과값에 영향을 준다

## 임계영역(Critical Region/Section)

![Untitled 1](https://user-images.githubusercontent.com/47595515/212966841-975532e5-ef8f-4dd7-810a-03ee1f5d388d.png)

- 둘 이상의 프로세스 또는 스레드가 공유자원에 접근할 때 순서등의 이유로 결과가 달라지는 영역
- 임계영역을 해결하기 위한 4가지 조건
    - 상호 배제(Mutual Exclusion) : 두 개 프로세스가 동시에 자기의 임계영역 내에 존재하는 경우는 없어야 한다
    - 한정 대기(Bounded Waiting) : 임계영역에 진입하기 위해 무한히 기다리는 프로세스는 없어야 한다
    - 진행(Progress) : 임계영역 외부에서 실행되고 있는 프로세스는 다른 프로세스들을 블록시켜서는 안된다
    - CPU의 개수나 속도에 대해 어떤 가정도 하지 않는다
- 임계영역을 해결하기 위한 방법
    - 토대가 되는 메커니즘은 잠금(lock)
    - 뮤텍스, 세마포어, 모니터 등